var app=angular.module("app",["ui.bootstrap"]);app.controller("bmrCtrl",["$scope",function(e){function i(){var i,h,t=document.location.href;t.indexOf("?value=")>0&&(h=t.split("?value=")[1],i=decodeURIComponent(h),i=i.split(","),e.isImperial=i[0].trim(),e.isFemale=i[1].trim(),"1"===e.isImperial?(e.isImperial=!0,e.isFemale="1"===e.isFemale?!0:!1,e.age=parseFloat(i[2]),e.weight_i=parseFloat(i[3]),e.height_i_feet=parseFloat(i[4]),e.height_i_inch=parseFloat(i[5])):(e.isImperial=!1,e.isFemale="1"===e.isFemale?!0:!1,e.age=parseFloat(i[2]),e.weight_m=parseFloat(i[3]),e.height_m=parseFloat(i[4])),e.calculate())}function h(){var i=document.location.href,h="";i.indexOf("?value=")>0&&(i=i.split("?value=")[0]),i+="?value=",console.log("sex="+e.isFemale),console.log("m = "+e.isImperial),e.isImperial?(h+="1, ",h+=e.isFemale?"1, ":"0, ",h+=e.age+", ",h+=e.weight_i+", ",h+=e.height_i_feet+", ",h+=e.height_i_inch+", "):(h+="0, ",h+=e.isFemale?"1, ":"0, ",h+=e.age+", ",h+=e.weight_m+", ",h+=e.height_m+", "),i+=encodeURIComponent(h),$(".shareUrl textarea").html(i)}e.weight_i=122,e.height_i_feet=5,e.height_i_inch=3,e.height_i=63,e.weight_m=55,e.height_m=160,e.isImperial=!0,e.isFemale=!0,e.bmr=1355,e.age=27,e.calculate=function(){e.isImperial?(e.height_i_inch>=12&&(e.height_i_feet++,e.height_i_inch-=12),0>e.height_i_inch&&(e.height_i_feet--,e.height_i_inch=11),e.height_i=(12*e.height_i_feet+e.height_i_inch).round(1),e.bmr=e.isFemale?655+4.35*e.weight_i+4.7*e.height_i-4.7*e.age:66+6.2*e.weight_i+12.7*e.height_i-6.76*e.age,e.weight_m=(.4536*e.weight_i).round(2),e.height_m=(2.54*e.height_i).round(2)):(e.bmr=e.isFemale?655.1+9.563*e.weight_m+1.85*e.height_m-4.676*e.age:66.5+13.75*e.weight_m+5.003*e.height_m-6.755*e.age,e.weight_i=(e.weight_m/.4536).round(2),e.height_i=(e.height_m/2.54).round(1),e.height_i_feet=parseInt(e.height_i/12),e.height_i_inch=(e.height_i%12).round(2)),e.bmr=e.bmr.round(0),h()},i()}]),Number.prototype.round=function(e){return+(Math.round(this+"e+"+e)+"e-"+e)};